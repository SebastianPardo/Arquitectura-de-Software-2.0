<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <f:metadata>
        <f:viewAction action="#{loginBean.anotherProfileOnLoad}" />
    </f:metadata>
    <h:head>
        <title>UN Profile</title>
    </h:head>
    <h:body style="padding: 40px;">
        <b:form id="barForm">
            <b:navBar brand="UNProfiles" brandHref="/UNProfile/faces/bootstrap.xhtml" fixed="top" inverse="true">
                <b:navbarLinks>
                    <b:navLink value="Buscar" href="/UNProfile/faces/profile_search.xhtml"></b:navLink>
                    <b:navCommandLink value="Cerrar" action="#{loginBean.logout()}"/>
                </b:navbarLinks>
            </b:navBar>
        </b:form>
        <b:container fluid="true">
            <b:well>

                <h1>#{loginBean.userVisit.usrAlias}</h1>

                <p>#{loginBean.userVisit.usrName} #{loginBean.userVisit.usrLastName}</p>
                <p>#{loginBean.userVisit.usrMail}</p>
                <p>#{loginBean.userVisit.usrGenre}</p>
                <p>#{loginBean.userVisit.usrTel}</p>
            </b:well>
            <b:container fluid="true">
                <b:form id="amigos">
                    <b:dataTable id ="userFriends" span="9" lang="es" value="#{loginBean.userVisit.usrFriends}" var="user" searching="true">

                        <b:dataTableColumn data-search="#{user.usrAlias} #{user.usrName}  #{user.usrLastName} #{user.usrMail}" rendered="false"/>
                        <b:dataTableColumn label="Amigos" orderable="true">
                            <b:container fluid="true">
                                <b:commandButton look="link" value="#{user.usrAlias}" action="#{loginBean.visit(user)}" style="padding: 0px 0px 6px;"/>
                                <p>#{user.usrName} #{user.usrLastName}</p>
                                <p>#{user.usrMail}</p>
                            </b:container>
                        </b:dataTableColumn>
                        <b:dataTableColumn label="" style="width: 100px;">
                            <b:container fluid="true">
                                <b:commandButton id="deleteFriend" look="link" value="" icon="glyphicon-remove" style="color: rgb(255, 174, 8);" tooltip="Eliminar" action="#{userBean.deleteFriend(loginBean.user.usrId, user.usrId)}" update="amigos"/>
                                <b:commandButton id="blockFriend" look="link" value="" icon="glyphicon-ban-circle" style="color: rgb(255, 8, 8);" tooltip="Bloquear" action="#{userBean.blockFriend(loginBean.user.usrId, user.usrId)}" update="amigos"/>
                            </b:container>
                        </b:dataTableColumn>
                    </b:dataTable>
                </b:form>
                <b:well span="3" style="max-height: 525px; overflow-x: auto;" rendered="#{loginBean.user.usrPendingFriendsReceived.size()!=0}">
                    <h3 style="text-align: center">Peticiones</h3>
                    <b:form id="requestsForm">
                        <c:forEach items="#{loginBean.user.usrPendingFriendsReceived}" var="usr">
                            <b:container style="width:250px;">
                                <b:container id="SuggestedFriend" fluid="true" style="padding-left: 25px; padding-right: 25px; padding-top: 25px;">
                                    <b:commandButton look="link" value="#{usr.usrAlias}" action="#{loginBean.visit(usr)}" style="padding: 0px 0px 6px;"/>
                                    <p>#{usr.usrName} #{usr.usrLastName}</p>
                                    <p>#{usr.usrMail}</p>
                                    <b:row>
                                        <b:column span="1" offset="6">
                                            <b:commandButton look="link" value="" icon="glyphicon-plus" tooltip="Agregar" action="#{userBean.answerFriendRequest(loginBean.user.usrId, usr.usrId, true)}" update="requestsForm amigos sugestedForm"/>
                                        </b:column>
                                        <b:column span="1">
                                            <b:commandButton look="link" value="" icon="glyphicon-remove" tooltip="Rechazar" style="color: rgb(255, 8, 8);" action="#{userBean.answerFriendRequest(loginBean.user.usrId, usr.usrId, false)}" update="requestsForm amigos sugestedForm"/>
                                        </b:column>
                                    </b:row>
                                </b:container>
                            </b:container>
                        </c:forEach>
                    </b:form>
                </b:well>
                <h2 style="text-align: center">Sugerencias</h2>
                <b:form id="sugestedForm">
                    <b:carousel id="sugested" span="3" showIndicators="true" style="position: relative;color: #FFF;background: #4A4A4A;background-clip: border-box" tooltip="Sugerencias">

                        <c:forEach items="#{userBean.appController.loadSugestedFriendsFrom(loginBean.user.usrId)}" var="usr">
                            <b:carouselItem style="width:400px;height:230px;">
                                <b:container id="SuggestedFriend" fluid="true" style="padding-left: 35px; padding-right: 25px; padding-top: 25px;">
                                    <b:commandButton look="link" value="#{usr.usrAlias}" action="#{loginBean.visit(usr)}" style="padding: 0px 0px 6px;"/>
                                    <p>#{usr.usrName} #{usr.usrLastName}</p>
                                    <p>#{usr.usrMail}</p>
                                    <b:row>
                                        <b:column span="4" offset="5">
                                            <b:commandButton look="link" value="" icon="glyphicon-plus" tooltip="Agregar" action="#{userBean.addFriend(loginBean.user.usrId, usr.usrId)}" update="sugestedForm"/>    
                                        </b:column>
                                    </b:row>
                                </b:container>
                            </b:carouselItem>
                        </c:forEach>


                    </b:carousel>
                </b:form>
            </b:container>
        </b:container>
    </h:body>
</html>
